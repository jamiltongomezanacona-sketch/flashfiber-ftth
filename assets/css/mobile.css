/* =====================================================
   FlashFiber FTTH - Mobile First Styles
   Estilos base para móvil (0px+) - Mobile First Approach
===================================================== */

/* ===============================
   Variables Responsive
=============================== */
:root {
  --touch-target-min: 44px;
  --touch-target-comfort: 48px;
  --spacing-mobile: 1rem;
  --spacing-tablet: 1.5rem;
  --spacing-desktop: 2rem;
}

/* ===============================
   Base Móvil - Touch Targets
=============================== */

/* Touch targets mínimos para botones e inputs */
button,
input[type="button"],
input[type="submit"],
a.button,
.menu-item {
  min-height: var(--touch-target-min);
  min-width: var(--touch-target-min);
  padding: 0.75rem 1rem;
}

/* Prevenir zoom accidental en iOS al enfocar inputs */
input,
select,
textarea {
  font-size: 16px; /* iOS no hace zoom si es 16px+ */
}

@media (min-width: 768px) {
  input,
  select,
  textarea {
    font-size: 14px; /* En desktop puede ser más pequeño */
  }
}

/* ===============================
   Scroll Mejorado iOS
=============================== */
.scrollable,
.panel-content,
.sidebar-menu,
#eventoModal .modal-content,
.route-card {
  -webkit-overflow-scrolling: touch;
  overflow-scrolling: touch;
}

/* ===============================
   Prevenir Selección Accidental
=============================== */
button,
.menu-item,
.map-controls button,
.route-btn,
#eventoModal .modal-footer button {
  -webkit-tap-highlight-color: rgba(0, 180, 216, 0.2);
  touch-action: manipulation; /* Previene double-tap zoom */
  user-select: none; /* Previene selección de texto accidental */
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
}

/* ===============================
   Viewport Fixes Móvil
=============================== */
@media (max-width: 767px) {
  /* Fix para iOS Safari - viewport height */
  body.app-map {
    height: 100svh;
    height: -webkit-fill-available; /* Fallback iOS */
  }
  
  /* Prevenir scroll horizontal */
  html, body {
    overflow-x: hidden;
    position: relative;
    width: 100%;
  }
}

/* ===============================
   Utilidades Responsive
=============================== */

/* Ocultar en móvil */
@media (max-width: 767px) {
  .hide-mobile {
    display: none !important;
  }
}

/* Mostrar solo en móvil */
.show-mobile {
  display: none;
}

@media (max-width: 767px) {
  .show-mobile {
    display: block;
  }
}

/* Ocultar en tablet y móvil */
@media (max-width: 1023px) {
  .hide-tablet {
    display: none !important;
  }
}

/* ===============================
   Espaciado Responsive
=============================== */
@media (max-width: 767px) {
  :root {
    --spacing-mobile: 0.75rem;
  }
}

@media (min-width: 768px) {
  :root {
    --spacing-mobile: 1rem;
  }
}

@media (min-width: 1024px) {
  :root {
    --spacing-mobile: 1.5rem;
  }
}

/* ===============================
   Optimizaciones para Tablets
=============================== */
@media (min-width: 768px) and (max-width: 1024px) {
  /* Tablets en modo portrait y landscape */
  :root {
    --spacing-tablet: 1.25rem;
    --touch-target-tablet: 48px;
  }
  
  /* Aumentar tamaño de botones para tablets */
  button,
  input[type="button"],
  input[type="submit"],
  a.button,
  .menu-item {
    min-height: var(--touch-target-tablet);
    min-width: var(--touch-target-tablet);
    padding: 0.875rem 1.25rem;
  }
  
  /* Optimizar tipografía para tablets */
  body {
    font-size: 15px;
  }
  
  /* Mejor uso del espacio en tablets */
  .container {
    max-width: 900px;
    margin: 0 auto;
    padding: var(--spacing-tablet);
  }
}

/* Tablets en modo landscape (horizontal) */
@media (min-width: 768px) and (max-width: 1024px) and (orientation: landscape) {
  /* Aprovechar mejor el espacio horizontal */
  .sidebar {
    max-width: 380px;
  }
  
  .panel-capas {
    max-width: 400px;
  }
  
  /* Grid de 3 columnas en landscape */
  .grid {
    grid-template-columns: repeat(3, 1fr);
  }
}

/* Tablets en modo portrait (vertical) */
@media (min-width: 768px) and (max-width: 1024px) and (orientation: portrait) {
  /* Grid de 2 columnas en portrait */
  .grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  /* Sidebar más ancho en portrait */
  .sidebar {
    max-width: 360px;
  }
}

/* ===============================
   Optimizaciones de Rendimiento
=============================== */

/* Reducir repaints en elementos animados */
.sidebar,
.sidebar-overlay,
.route-card,
#eventoModal .modal-content {
  backface-visibility: hidden;
  perspective: 1000px;
}

/* Optimizar scroll en móvil */
@media (max-width: 767px) {
  .sidebar,
  #eventoModal .modal-content,
  .route-card {
    -webkit-overflow-scrolling: touch;
    overscroll-behavior: contain; /* Previene scroll bounce */
  }
}

/* Mejorar rendimiento de backdrop-filter */
.sidebar,
#btnSidebar,
.map-controls button {
  transform: translateZ(0); /* Acelera hardware */
}
